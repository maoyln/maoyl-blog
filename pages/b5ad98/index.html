<h1 id="进入包围圈感受-vim-surround-神器的威力">进入包围圈：感受 vim-surround 神器的威力</h1>

<p>在<a href="./06.什么是文本对象.md">第六天</a>的训练中，我们学习了文本对象，学习了如何通过 <code class="language-plaintext highlighter-rouge">i</code> <code class="language-plaintext highlighter-rouge">a</code> 进行对一些符号、标签的内部内容进行修改和删除；但有一些时候，我们可能是需要操作包裹着这些内容的符号本身；而这就今天的主角 ——— vim-surround 插件的核心功能。</p>

<h2 id="vim-surround">vim-surround</h2>

<p>vim-surround 是关于“包围”的插件：如被括号、括号、引号、XML 标签等等包围。该插件提供映射，可以轻松地成对删除、更改和添加此类包围着内容的符号。它的命令是 <code class="language-plaintext highlighter-rouge">s</code> (请勿与删除并进入 insert mode 的 <code class="language-plaintext highlighter-rouge">s</code> 或 vim-sneak 的 <code class="language-plaintext highlighter-rouge">s</code> 混淆，这两个是 operator，而 vim-surround 的 <code class="language-plaintext highlighter-rouge">s</code> 更像是一个 motion，虽然我不确定这样说准不准确)。</p>

<h3 id="命令示例">命令示例</h3>

<p>以下是 <a href="https://github.com/tpope/vim-surround">vim-surround</a> 插件 github 仓库 readme 中举得例子；并非我想偷懒，而是官方举得例子实在是已经非常详尽：</p>

<p>我们有如下字符串，光标在它内部时 normal 模式下使用 <code class="language-plaintext highlighter-rouge">cs"'</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Hello world!"
</code></pre></div></div>

<p>则会变成以下这样：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'Hello orld!'
</code></pre></div></div>

<p>这时我们使用 <code class="language-plaintext highlighter-rouge">cs'&lt;q&gt;</code>，就变成了：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;p&gt;Hello world!&lt;/p&gt;
</code></pre></div></div>

<p>再使用 <code class="language-plaintext highlighter-rouge">cst"</code>，就回到最初的模样（疑惑为什么是 <code class="language-plaintext highlighter-rouge">t</code> 的人需要去复习一下<a href="./06.什么是文本对象.md">前面</a>了）：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Hello world!"
</code></pre></div></div>

<p>删除包裹的符号，我们使用 <code class="language-plaintext highlighter-rouge">cs"</code>：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello world!
</code></pre></div></div>

<p>如果我们把光标移到 <code class="language-plaintext highlighter-rouge">hello</code> 单词上，输入 <code class="language-plaintext highlighter-rouge">ysiw]</code>，则变成这样：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Hello] world!
</code></pre></div></div>

<p>如果我们要把中括号变成花括号并且单词和符号之间要有空格，我们可以使用 <code class="language-plaintext highlighter-rouge">cs]{</code> （如果使用 <code class="language-plaintext highlighter-rouge">}</code> 则添加的花括号是没有空格的，<code class="language-plaintext highlighter-rouge">)</code> <code class="language-plaintext highlighter-rouge">]</code> 同理）：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ Hello } world!
</code></pre></div></div>

<p>这时，我们还可以通过 <code class="language-plaintext highlighter-rouge">yssb</code> 或 <code class="language-plaintext highlighter-rouge">yss)</code> 来给整行添加包裹：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>({ Hello } world!)
</code></pre></div></div>

<p>输入 <code class="language-plaintext highlighter-rouge">ds{ds)</code> 去掉所有包裹：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello world!
</code></pre></div></div>

<p>对于前端开发来说，他是一个很有用的插件；比如我们现在有一个这样的标签：</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>hello world<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>这时我们使用 <code class="language-plaintext highlighter-rouge">V</code> 进入 linewise visual model（行内可视化模式），再键入 <code class="language-plaintext highlighter-rouge">S&lt;div class="important"&gt;</code>，就变成了：</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"important"</span><span class="nt">&gt;</span>
<span class="nt">&lt;p&gt;</span>hello world<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div</span> <span class="err">class="important"</span><span class="nt">&gt;</span>
</code></pre></div></div>

<p>在我们日常开发中，尤其是写 html 时，这非常好用。而且我们还可以使用 <code class="language-plaintext highlighter-rouge">.</code> 来重复执行 <code class="language-plaintext highlighter-rouge">ds</code> <code class="language-plaintext highlighter-rouge">cs</code> <code class="language-plaintext highlighter-rouge">yss</code> 这类的指令，一如我们之前提到那样。</p>

<p>:::tip one more thing
练习群的朋友提到还有一个用法，即配合 <code class="language-plaintext highlighter-rouge">t</code> 来出来 xml 或 html 的标签包裹的场景，比如：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hello
</code></pre></div></div>

<p>在 hello 中输入 <code class="language-plaintext highlighter-rouge">ysiwt</code> + <code class="language-plaintext highlighter-rouge">div</code>，则变成了：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div&gt;</span>hello<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>再输入 <code class="language-plaintext highlighter-rouge">ysst</code> + <code class="language-plaintext highlighter-rouge">div</code>，就成了：</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div&gt;&lt;div&gt;</span>hello<span class="nt">&lt;/div&gt;&lt;/div&gt;</span>
</code></pre></div></div>
<p>:::</p>
