<h1 id="01-jsx简介">01. JSX简介</h1>

<h2 id="什么是jsx">什么是JSX？</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span></code></pre></div></div>

<p>以类似模板语法的方式描述UI的一种语法。它是JS的<strong>语法糖</strong>，<strong>本质上也是JS</strong>。可以在其中使用<strong>变量或表达式、函数等</strong>。</p>

<h2 id="为什么使用jsx">为什么使用JSX？</h2>

<p>将<em>标记与逻辑</em> 共同存放在称之为“组件”的松散耦合单元之中，来实现<a href="https://en.wikipedia.org/wiki/Separation_of_concerns"><em>关注点分离</em></a>。</p>

<p>React不强制使用JSX，但在 JavaScript 代码中将 JSX 和 UI 放在一起时，会在<strong>视觉上有辅助作用</strong>。</p>

<h2 id="在-jsx-中嵌入表达式">在 JSX 中嵌入表达式</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span></code></pre></div></div>

<p>在 JSX 语法中，你可以在大括号内放置任何有效的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions">JavaScript 表达式</a>。</p>

<h2 id="jsx-也是一个表达式">JSX 也是一个表达式</h2>

<p>在编译之后，JSX 表达式会被转为普通 JavaScript 函数调用，并且对其取值后<strong>得到 JavaScript 对象</strong></p>

<blockquote>
  <p>可以把JSX当初一个对象来对待，可以使用它赋值给变量、当参数输入函数、返回JSX等。</p>
</blockquote>

<h2 id="jsx-特定属性">JSX 特定属性</h2>

<p>通过使用引号，来将属性值指定为字符串字面量：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">tabIndex</span><span class="o">=</span><span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;</span><span class="err">;
</span></code></pre></div></div>

<blockquote>
  <p>JSX中的属性名使用camelCase(小驼峰)命名。如上面例子中的<code class="language-plaintext highlighter-rouge">tabIndex</code></p>
</blockquote>

<p>使用大括号，来在属性值中插入一个 JavaScript 表达式：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">avatarUrl</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="sr">/img&gt;</span><span class="err">;
</span></code></pre></div></div>

<h2 id="使用-jsx-指定子元素">使用 JSX 指定子元素</h2>

<p>JSX 标签里能够包含很多子元素:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Good to see you here.<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">);</span>
</code></pre></div></div>

<h2 id="jsx-防止注入攻击">JSX 防止注入攻击</h2>

<p>React DOM 在渲染所有输入内容之前，默认会进行<a href="https://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html">转义</a>。它可以确保在你的应用中，<strong>永远不会注入那些并非自己明确编写的内容</strong>。所有的内容在渲染之前都被转换成了字符串。这样可以有效地防止 <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS（cross-site-scripting, 跨站脚本）</a>攻击。</p>

<h2 id="jsx-表示对象">JSX 表示对象</h2>

<p>Babel 会把 JSX 转译成一个名为 <code class="language-plaintext highlighter-rouge">React.createElement()</code> 函数调用。</p>

<p>以下两种示例代码完全等效：</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">className</span><span class="p">=</span><span class="s">"greeting"</span><span class="p">&gt;</span>
    Hello, world!
  <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
  <span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 标签名</span>
  <span class="p">{</span><span class="na">className</span><span class="p">:</span> <span class="dl">'</span><span class="s1">greeting</span><span class="dl">'</span><span class="p">},</span> <span class="c1">// 属性对象</span>
  <span class="dl">'</span><span class="s1">Hello, world!</span><span class="dl">'</span> <span class="c1">// 内容</span>
<span class="p">);</span>
</code></pre></div></div>
