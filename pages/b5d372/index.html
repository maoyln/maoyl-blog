<h1 id="02-元素渲染">02. 元素渲染</h1>

<p>元素是构成 React 应用的最小砖块，描述了你在屏幕上想看到的内容。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">&lt;</span><span class="sr">/h1&gt;</span><span class="err">;
</span></code></pre></div></div>

<p>与浏览器的 DOM 元素不同，<strong>React 元素是创建开销极小的普通对象</strong>。React DOM 会负责更新 DOM 来与 React 元素保持一致。</p>

<h2 id="将一个元素渲染为-dom">将一个元素渲染为 DOM</h2>

<p>假设你的 HTML 文件某处有一个 <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code>：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>根节点，React应用只有单一根DOM节点</p>

<blockquote>
  <p>但一个html页面可以有多个React应用，每个应用对应一个独立根节点。</p>
</blockquote>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">el</span> <span class="o">=</span> <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="更新已渲染的元素">更新已渲染的元素</h2>

<p>React 元素是<a href="https://en.wikipedia.org/wiki/Immutable_object">不可变对象</a>。一旦被创建，你就无法更改它的子元素或者属性。一个元素就像电影的单帧：它代表了某个特定时刻的 UI。</p>

<p>根据我们已有的知识，更新 UI 唯一的方式是创建一个全新的元素，并将其传入 <a href="https://zh-hans.reactjs.org/docs/react-dom.html#render"><code class="language-plaintext highlighter-rouge">ReactDOM.render()</code></a>。</p>

<p>考虑一个计时器的例子：</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">tick</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// element是一个React元素</span>
  <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hello, world!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>It is <span class="si">{</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toLocaleTimeString</span><span class="p">()</span><span class="si">}</span>.<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
  <span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">));}</span>

<span class="nx">setInterval</span><span class="p">(</span><span class="nx">tick</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</code></pre></div></div>

<p>注意：在实践中，<strong>大多数 React 应用只会调用一次 <a href="https://zh-hans.reactjs.org/docs/react-dom.html#render"><code class="language-plaintext highlighter-rouge">ReactDOM.render()</code></a></strong>。在下一个章节，我们将学习如何将这些代码封装到<strong><a href="https://zh-hans.reactjs.org/docs/state-and-lifecycle.html">有状态组件</a></strong>中。</p>

<h2 id="react-只更新它需要更新的部分">React 只更新它需要更新的部分</h2>

<p>上个例子中，尽管每一秒我们都会新建一个描述整个 UI 树的元素，但React DOM <strong>只会更新实际改变了的内</strong>容。</p>
