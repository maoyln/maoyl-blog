<h1 id="插槽slot">插槽slot</h1>

<p><a href="https://cn.vuejs.org/v2/guide/components-slots.html">API</a></p>

<h2 id="插槽">插槽</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;child&gt;</span> <span class="c">&lt;!-- 组件标签 --&gt;</span>
        <span class="nt">&lt;h1&gt;</span>hello<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/child&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">child</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="c1">// 子组件</span>
        <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;div&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;</span><span class="dl">'</span>
    <span class="p">})</span>

    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span>
    <span class="p">})</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>上面代码中，组件标签内的<code class="language-plaintext highlighter-rouge">h1</code>是要插入子组件内部的元素，子组件内使用<code class="language-plaintext highlighter-rouge">slot</code>标签接收父组件插入的<code class="language-plaintext highlighter-rouge">h1</code>标签。</p>

<h4 id="默认值">默认值</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">child</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;div&gt;&lt;slot&gt;默认值&lt;/slot&gt;&lt;/div&gt;</span><span class="dl">'</span>
<span class="p">})</span>
</code></pre></div></div>

<p>子组件<code class="language-plaintext highlighter-rouge">slot</code>标签内可以添加默认值，它只会在父组件没有传入内容的时候被渲染。</p>

<h2 id="具名插槽">具名插槽</h2>

<p>::: warning</p>

<p>自 2.6.0 起有所更新。使用 <code class="language-plaintext highlighter-rouge">slot</code> attribute 的语法已废弃。</p>

<p>:::</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;child&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">slot=</span><span class="s">"header"</span><span class="nt">&gt;</span>header<span class="nt">&lt;/div&gt;</span> <span class="c">&lt;!--旧语法 使用template标签或其他标签都可以--&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">slot=</span><span class="s">"footer"</span><span class="nt">&gt;</span>footer<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/child&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">child</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;div&gt;
                        &lt;slot name="header"&gt;&lt;/slot&gt;
                        &lt;div&gt;content&lt;/div&gt;
                        &lt;slot name="footer"&gt;&lt;/slot&gt;
                    &lt;/div&gt;`</span>
    <span class="p">})</span>

    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span>
    <span class="p">})</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>上面代码中，组件标签内有两个元素，分别添加了<code class="language-plaintext highlighter-rouge">slot</code>属性赋予不同的值，子组件内分别有两个<code class="language-plaintext highlighter-rouge">slot</code>插槽，添加了对应的<code class="language-plaintext highlighter-rouge">name</code>属性，用于分别接收父组件传入的内容。</p>

<p>::: tip</p>

<p>自 2.6.0 起，使用<code class="language-plaintext highlighter-rouge">v-slot</code>指令代替<code class="language-plaintext highlighter-rouge">slot</code> attribute 的语法。</p>

<p>:::</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;child&gt;</span>
        <span class="nt">&lt;template</span> <span class="na">v-slot:header</span><span class="nt">&gt;</span> <span class="c">&lt;!--新语法 只能使用template标签--&gt;</span>
            <span class="nt">&lt;h1&gt;</span>标题<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;/template&gt;</span>
        <span class="nt">&lt;p&gt;</span>内容<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;template</span> <span class="na">v-slot:footer</span><span class="nt">&gt;</span>
            <span class="nt">&lt;p&gt;</span>页脚<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/template&gt;</span>
    <span class="nt">&lt;/child&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
	<span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">child</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
		<span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;div&gt;
						&lt;header&gt;
						   &lt;slot name="header"&gt;&lt;/slot&gt;
						&lt;/header&gt;
						&lt;main&gt;
						  &lt;slot&gt;&lt;/slot&gt;
						&lt;/main&gt;
						&lt;footer&gt;
						  &lt;slot name="footer"&gt;&lt;/slot&gt;
						&lt;/footer&gt;
					&lt;/div&gt;`</span>
	<span class="p">})</span>

    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span>
    <span class="p">})</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>自2.6.0版本起，具名插槽由原来的<code class="language-plaintext highlighter-rouge">slot</code>标签属性改为<code class="language-plaintext highlighter-rouge">v-slot</code>指令，例<code class="language-plaintext highlighter-rouge">v-slot:header</code>。子组件内仍然是在<code class="language-plaintext highlighter-rouge">slot</code>插槽标签添加<code class="language-plaintext highlighter-rouge">name</code>属性用于分别接收内容。未具名的插槽接收未使用<code class="language-plaintext highlighter-rouge">v-slot</code>指定的内容。</p>

<p>另外，<strong>具名插槽同样可以使用默认值</strong>。</p>

<p>注意 <strong><code class="language-plaintext highlighter-rouge">v-slot</code> 只能添加在 <code class="language-plaintext highlighter-rouge">&lt;template</code> 上</strong> (只有<a href="https://cn.vuejs.org/v2/guide/components-slots.html#独占默认插槽的缩写语法">一种例外情况</a>)，这一点和已经废弃的 <a href="https://cn.vuejs.org/v2/guide/components-slots.html#废弃了的语法"><code class="language-plaintext highlighter-rouge">slot</code>attribute</a>不同。</p>

<h2 id="作用域插槽">作用域插槽</h2>

<p>::: warning</p>

<p>自 2.6.0 起有所更新。使用 <code class="language-plaintext highlighter-rouge">slot-scope</code> attribute 的语法已废弃。</p>

<p>:::</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;child&gt;</span>
        <span class="nt">&lt;template</span> <span class="na">slot-scope=</span><span class="s">"dataObj"</span><span class="nt">&gt;</span> <span class="c">&lt;!--可使用其他标签，但注意其他标签将会被带到插槽里面--&gt;</span>
            <span class="nt">&lt;li&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/template&gt;</span>
    <span class="nt">&lt;/child&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
	<span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">child</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">list</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;div&gt;
						&lt;ul&gt;
							&lt;slot
								v-for="item of list"
								:dataItem=item
							&gt;
							&lt;/slot&gt;
						&lt;/ul&gt;
					  &lt;/div&gt;`</span>
    <span class="p">})</span>

    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span>
    <span class="p">})</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>上面代码中，组件标签内需要使用<code class="language-plaintext highlighter-rouge">template</code>标签并且设置<code class="language-plaintext highlighter-rouge">slot-scope</code>属性 用于接收子组件内传递的值，<code class="language-plaintext highlighter-rouge">template</code>标签内的<code class="language-plaintext highlighter-rouge">li</code>标签是传入插槽的元素，<code class="language-plaintext highlighter-rouge">dataObj.dataItem</code>数据由子组件内提供。子组件内通过<code class="language-plaintext highlighter-rouge">v-for</code>循环插入父组件提供的<code class="language-plaintext highlighter-rouge">li</code>标签，并且通过<code class="language-plaintext highlighter-rouge">:dataItem=item</code>把每个<code class="language-plaintext highlighter-rouge">item</code>数据传递出去。</p>

<blockquote>
  <p>子组件提供数据，父组件中接收数据，可以对数据处理并插入到元素，然后把元素放入子组件插槽。</p>
</blockquote>

<h4 id="作用">作用：</h4>

<p>数据由子组件提供，但渲染什么元素由父组件决定，并且可以对数据做二次处理。</p>

<p>:::tip</p>

<p>自 2.6.0 起。使用<code class="language-plaintext highlighter-rouge">v-slot</code>代替 <code class="language-plaintext highlighter-rouge">slot-scope</code> attribute 的语法。</p>

<p>:::</p>

<p>为了让 <code class="language-plaintext highlighter-rouge">user</code> 在父级的插槽内容中可用，我们可以将 <code class="language-plaintext highlighter-rouge">user</code> 作为 <code class="language-plaintext highlighter-rouge">&lt;slot&gt;</code> 元素的一个 attribute 绑定上去：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;span&gt;</span>
  <span class="nt">&lt;slot</span> <span class="na">v-bind:user=</span><span class="s">"user"</span><span class="nt">&gt;</span>
    
  <span class="nt">&lt;/slot&gt;</span>
<span class="nt">&lt;/span&gt;</span>
</code></pre></div></div>

<p>绑定在 <code class="language-plaintext highlighter-rouge">&lt;slot&gt;</code> 元素上的 attribute 被称为<strong>插槽 prop</strong>。现在在父级作用域中，我们可以使用带值的 <code class="language-plaintext highlighter-rouge">v-slot</code> 来定义我们提供的插槽 prop 的名字：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;current-user&gt;</span>
  <span class="nt">&lt;template</span> <span class="na">v-slot:default=</span><span class="s">"slotProps"</span><span class="nt">&gt;</span>
    
  <span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/current-user&gt;</span>
</code></pre></div></div>

<p>在这个例子中，我们选择将包含所有插槽 prop 的对象命名为 <code class="language-plaintext highlighter-rouge">slotProps</code>，但你也可以使用任意你喜欢的名字。</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;child&gt;</span>
        <span class="nt">&lt;template</span> <span class="na">v-slot:default=</span><span class="s">"dataObj"</span><span class="nt">&gt;</span> <span class="c">&lt;!--default是默认具名，可省略。但有多个插槽时不能省略。--&gt;</span>
            <span class="nt">&lt;li&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/template&gt;</span>
    <span class="nt">&lt;/child&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
	<span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="dl">'</span><span class="s1">child</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">(){</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="na">list</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">template</span><span class="p">:</span> <span class="s2">`&lt;div&gt;
						&lt;ul&gt;
							&lt;slot
								v-for="item of list"
								:dataItem=item
							&gt;
							&lt;/slot&gt;
						&lt;/ul&gt;
					  &lt;/div&gt;`</span>
    <span class="p">})</span>

    <span class="kd">var</span> <span class="nx">vm</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
        <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#root</span><span class="dl">'</span>
    <span class="p">})</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h2 id="具名插槽的缩写">具名插槽的缩写</h2>

<p>跟 <code class="language-plaintext highlighter-rouge">v-on</code> 和 <code class="language-plaintext highlighter-rouge">v-bind</code> 一样，<code class="language-plaintext highlighter-rouge">v-slot</code> 也有缩写，即把参数之前的所有内容 (<code class="language-plaintext highlighter-rouge">v-slot:</code>) 替换为字符 <code class="language-plaintext highlighter-rouge">#</code>。例如 <code class="language-plaintext highlighter-rouge">v-slot:header</code> 可以被重写为 <code class="language-plaintext highlighter-rouge">#header</code>：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;base-layout&gt;</span>
  <span class="nt">&lt;template</span> <span class="na">#header</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Here might be a page title<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;/template&gt;</span>

  <span class="nt">&lt;p&gt;</span>A paragraph for the main content.<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>And another one.<span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;template</span> <span class="na">#footer</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Here's some contact info<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/base-layout&gt;</span>
</code></pre></div></div>

<p>然而，和其它指令一样，该缩写只在其有参数的时候才可用。这意味着以下语法是无效的：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 这样会触发一个警告 --&gt;</span>
<span class="nt">&lt;current-user</span> <span class="na">#</span><span class="err">="{</span> <span class="na">user</span> <span class="err">}"</span><span class="nt">&gt;</span>
  
<span class="nt">&lt;/current-user&gt;</span>
</code></pre></div></div>

<p>如果你希望使用缩写的话，你必须始终以明确插槽名取而代之：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;current-user</span> <span class="na">#default</span><span class="err">="{</span> <span class="na">user</span> <span class="err">}"</span><span class="nt">&gt;</span>
  
<span class="nt">&lt;/current-user&gt;</span>
</code></pre></div></div>

<h2 id="demo">Demo</h2>

<p class="codepen" data-height="400" data-theme-id="light" data-default-tab="js,result" data-user="xugaoyi" data-slug-hash="XWbdpBp" style="height: 400px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="插槽slot">
  <span>See the Pen <a href="https://codepen.io/xugaoyi/pen/XWbdpBp">
  插槽slot</a> by xugaoyi (<a href="https://codepen.io/xugaoyi">@xugaoyi</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>

