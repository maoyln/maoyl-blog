<h1 id="vue中的防抖函数封装和使用">Vue中的防抖函数封装和使用</h1>

<p>如搜索框中，每改变一个数值就请求一次搜索接口，当快速的改变数值时并不需要多次请求接口，这就需要一个防抖函数：</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 防抖函数</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">debounce</span><span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// func 函数 delay间隔时间</span>
  <span class="kd">let</span> <span class="nx">timer</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">(...</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">timer</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">func</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span>
    <span class="p">},</span> <span class="nx">delay</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>




<span class="c1">//使用：</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">debounce</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/common/js/util</span><span class="dl">'</span>

<span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
    <span class="cm">/**
     * 为什么不直接在watch里面写？？？
     * 因为要做防抖处理，防止在快速输入时多次请求接口
     */</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="dl">'</span><span class="s1">query</span><span class="dl">'</span><span class="p">,</span> <span class="nx">debounce</span><span class="p">((</span><span class="nx">newQuery</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">query</span><span class="dl">'</span><span class="p">,</span> <span class="nx">newQuery</span><span class="p">)</span>
    <span class="p">},</span> <span class="mi">200</span><span class="p">))</span>
  <span class="p">}</span>
</code></pre></div></div>

<h3 id="相关文章">相关文章</h3>

<p><a href="https://maoyl.netlify.com/pages/0f6a0ac99b62ede5/">防抖与节流函数</a></p>
