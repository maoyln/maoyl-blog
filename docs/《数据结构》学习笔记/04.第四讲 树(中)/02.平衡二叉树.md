---
title: 平衡二叉树
date: 2024-07-09 21:51:57
permalink: /pages/090fea/
categories:
  - 《数据结构》学习笔记
  - 第四讲 树(中)
tags:
  - 数据结构
author:
  name: maoyln
  link: https://github.com/maoyln
---

## 二叉树平衡

`二叉平衡树（Balanced Binary Tree）`，又称为`AVL树`，是一种`自平衡`的`二叉搜索树`。在二叉平衡树中，任何节点的两个子树的`高度最大差别不超过1`，这样既保证了快速查找的时间复杂度`（O(log n)）`，也避免了`树的高度退化为链表`。

## 平衡二叉树

`平衡二叉树（Balanced Binary Search Tree, BBST）`是指满足`某种平衡条件`的`二叉搜索树`，例如`AVL树`、`红黑树`等。这些树的平衡性保证了它们在`插入和删除操作后`的`性能不会急剧下降`。

## 平衡二叉树的调整

当进行`插入或删除`操作`导致树失去平衡`时，需要通过`旋转`来`重新平衡树`。常见的旋转有四种：`左旋`、`右旋`、`左-右旋`和`右-左旋`。

### 示例代码

#### 定义一个树节点类，包含键值、左右子节点和高度属性

```javascript
class TreeNode {
  // 
  constructor(key) {
    this.key = key; // 键值
    this.left = null; // 左节点
    this.right = null; // 右节点
    this.hight = 1; // 新节点的默认高度为1
  }
}
```

#### 定义一个AVL树类，用于管理树结构

```javascript
class AVLTree {
  constructor(key) {
    this.root = null; // 初始化树的根节点为空
  }

  // 获取节点高度
  getHeight(node) {
    if (node === null) return 0; // 树为空则节点高度为0
    return node.height; 
  }

  // 计算节点的平衡因子
  getBalanceFactor(node) {
    if (node === null) return 0; // 树为空则节点高度为0
    return this.getHeight(node.left) - this.getHeight(node.right);
  }

  // 右旋转操作，用于调整树的平衡
  rightRotate(y) {
    let x = y.left; // 获取y的左节点
    let t2 = x.right; // 获取x的右节点

    x.right = y; // 将y设置为x的右子节点
    y.left = t2; // 将t2设置为y的左子节点

    // 更新x和y的高度
    y.height = Math.max(this.getHeight(y.left), this.getHeight(y.right)) + 1;
    x.height = Math.max(this.getHeight(x.left), this.getHeight(x.right)) + 1;

    return x; // 返回新的根节点
  }
}

```