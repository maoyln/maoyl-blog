---
title: js如何实现当文本内容过长时，中间显示省略号,两端正常展示
date: 2024-07-21 09:50:02
permalink: /pages/ee30aa/
categories:
  - 前端
  - JavaScript文章
  - 常用工具
tags: 
  - null
author: 
  name: maoyln
  link: https://github.com/maoyln
---

## 需求简介

- 标题文本内容显示过长时，标题前后端正常展示，中间用省略号...表示；
- 并且鼠标悬浮后，展示全部内容；

## 实现思路

1. 获取标题盒子的真实宽度，这里用的是clientWidth；
2. 获取文本内容所占的实际宽度；
3. 根据文字的大小计算出每个文字所占的宽度；
4. 判读文本内容的实际宽度是否超了出标题盒子宽度；
5. 通过文字所占的宽度累加之和与标题盒子的宽度做对比，计算出要截取位置的索引；
6. 同理，文本尾部的内容需要反转一下，然后计算索引，截取完之后在反转回来；

### 代码

html代码
``` html
<div class="title" id="test">近日，银行纷纷下调大额存单利率，但银行定期存款仍被疯抢。银行理财经理表示：有意向购买定期存款要尽快，不确定利率是否会再降。</div>
```

css代码: 设置文本不换行，同时设置`overflow:hidden`让文本溢出盒子隐藏
```css
.title {
    width: 640px;
    height: 40px;
    line-height: 40px;
    font-size: 14px;
    color: #00b388;
    border: 1px solid #ddd;
    overflow: hidden;
    /* text-overflow: ellipsis; */
    white-space: nowrap;
    /* box-sizing: border-box; */
    padding: 0 10px;
}
```

